---
layout: single
title: Ninja Hacker Academy Parte 1
excerpt: "En esta serie de artículos vamos a resolver el laboratorio Ninja Hacker Academy de la plataforma GOAD."
date: 2025-08-20
classes: wide
header:
  teaser: /assets/images/NHA/logo_NHA.jpeg
  teaser_home_page: true
categories:
  - Ciberseguridad
tags:
  - Windows
  - Active Directory
---


<p align="center">
  <img src="/assets/images/NHA/logo_NHA.jpeg" alt="Logo NHA" style="max-width:60%; height:auto;">
</p>



# Introducción
En esta serie de artículos vamos a resolver el laboratorio Ninja Hacker Academy de la plataforma GOAD, que se puede encontrar [aquí](https://orange-cyberdefense.github.io/GOAD/labs/NHA/). Para ello utilizaré el comand and control [Mythic](https://github.com/its-a-feature/Mythic), y también haremos evasión del windows defender que se encuentra activo en todo el laboratorio.

Estas son las únicas pistas que nos dan en la [página oficial](https://orange-cyberdefense.github.io/GOAD/labs/NHA/):

- NINJA HACKER ACADEMY (NHA) está diseñado como un desafío de entrenamiento, mientras que GOAD fue creado como un laboratorio con la máxima cantidad de vulnerabilidades.
- Debes encontrar la manera de obtener privilegios de administrador de dominio en los 2 dominios (academy.ninja.lan y ninja.hack).
- El punto de partida es en srv01: 192.168.58.21
- Hay banderas (flags) en cada máquina, intenta capturarlas todas. Ten cuidado: todas las máquinas están actualizadas con Defender activado.
- Algunos exploits requieren modificar rutas, por lo que este laboratorio no es muy compatible con múltiples jugadores (a menos que lo hagas en equipo ;)).
- Obviamente, no hagas trampa mirando las contraseñas y banderas en los archivos de configuración; el laboratorio debe comenzar sin usuarios y llegar al compromiso total.

En mi caso utilizaré Virtualbox para levantar las máquinas, y mi máquina host como atacante, con la IP 192.168.0.158, que tendrá levantado Mythic para gestionar las conexiones. En este artículo no explicaré como instalar Mythic ni el laboratorio NHA, ya que viendo las instrucciones que se describen en sus repositorios no es nada complicado, y así podemos centrarnos en las diferentes explotaciones de las vulnerabilidades.

Tabla con las máquinas del laboratorio

| Domain             |      IP       | Hostname |
|--------------------|:-------------:|---------:|
| ninja.hack         | 192.168.56.10 |   DC-VIL |
| academy.ninja.lan  | 192.168.56.20 |   DC-AC  |
| academy.ninja.lan  | 192.168.56.21 |    WEB   |
| academy.ninja.lan  | 192.168.56.22 |    SQL   |
| academy.ninja.lan  | 192.168.56.23 |   SHARE  |


Empezamos haciendo un escaneo con nmap de todos los puertos a las 5 máquinas para ver que servicios tienen expuestos.

```bash
$ cat targets.txt

192.168.56.10
192.168.56.20
192.168.56.21
192.168.56.22
192.168.56.23
```

```bash
$ sudo nmap -p- --open -sS --min-rate 3000 -v -n -Pn -iL targets.txt -oA allPorts

Nmap scan report for 192.168.56.10
Host is up (0.00033s latency).
Not shown: 65510 filtered tcp ports (no-response)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT      STATE SERVICE
53/tcp    open  domain
80/tcp    open  http
88/tcp    open  kerberos-sec
135/tcp   open  msrpc
139/tcp   open  netbios-ssn
389/tcp   open  ldap
445/tcp   open  microsoft-ds
464/tcp   open  kpasswd5
593/tcp   open  http-rpc-epmap
636/tcp   open  ldapssl
3268/tcp  open  globalcatLDAP
3269/tcp  open  globalcatLDAPssl
3389/tcp  open  ms-wbt-server
5985/tcp  open  wsman
5986/tcp  open  wsmans
9389/tcp  open  adws
49666/tcp open  unknown
49667/tcp open  unknown
49673/tcp open  unknown
49674/tcp open  unknown
49676/tcp open  unknown
49677/tcp open  unknown
49691/tcp open  unknown
49693/tcp open  unknown
49718/tcp open  unknown
MAC Address: 08:00:27:E4:7F:D1 (Oracle VirtualBox virtual NIC)

Nmap scan report for 192.168.56.20
Host is up (0.00032s latency).
Not shown: 65511 filtered tcp ports (no-response)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT      STATE SERVICE
53/tcp    open  domain
88/tcp    open  kerberos-sec
135/tcp   open  msrpc
139/tcp   open  netbios-ssn
389/tcp   open  ldap
445/tcp   open  microsoft-ds
464/tcp   open  kpasswd5
593/tcp   open  http-rpc-epmap
636/tcp   open  ldapssl
3268/tcp  open  globalcatLDAP
3269/tcp  open  globalcatLDAPssl
3389/tcp  open  ms-wbt-server
5985/tcp  open  wsman
5986/tcp  open  wsmans
9389/tcp  open  adws
49666/tcp open  unknown
49667/tcp open  unknown
49668/tcp open  unknown
49674/tcp open  unknown
49675/tcp open  unknown
49677/tcp open  unknown
49678/tcp open  unknown
49691/tcp open  unknown
49719/tcp open  unknown
MAC Address: 08:00:27:82:FF:BA (Oracle VirtualBox virtual NIC)

Nmap scan report for 192.168.56.21
Host is up (0.00034s latency).
Not shown: 65529 filtered tcp ports (no-response)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT     STATE SERVICE
80/tcp   open  http
135/tcp  open  msrpc
445/tcp  open  microsoft-ds
3389/tcp open  ms-wbt-server
5985/tcp open  wsman
5986/tcp open  wsmans
MAC Address: 08:00:27:A7:CD:14 (Oracle VirtualBox virtual NIC)

Nmap scan report for 192.168.56.22
Host is up (0.00012s latency).
Not shown: 65517 closed tcp ports (reset)
PORT      STATE SERVICE
135/tcp   open  msrpc
139/tcp   open  netbios-ssn
445/tcp   open  microsoft-ds
1433/tcp  open  ms-sql-s
3389/tcp  open  ms-wbt-server
5985/tcp  open  wsman
5986/tcp  open  wsmans
47001/tcp open  winrm
49664/tcp open  unknown
49665/tcp open  unknown
49666/tcp open  unknown
49667/tcp open  unknown
49668/tcp open  unknown
49669/tcp open  unknown
49671/tcp open  unknown
49672/tcp open  unknown
49679/tcp open  unknown
65159/tcp open  unknown
MAC Address: 08:00:27:1B:D9:E5 (Oracle VirtualBox virtual NIC)

Nmap scan report for 192.168.56.23
Host is up (0.00029s latency).
Not shown: 65529 filtered tcp ports (no-response)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT      STATE SERVICE
135/tcp   open  msrpc
445/tcp   open  microsoft-ds
3389/tcp  open  ms-wbt-server
5985/tcp  open  wsman
5986/tcp  open  wsmans
49666/tcp open  unknown
MAC Address: 08:00:27:23:44:6A (Oracle VirtualBox virtual NIC)
```


